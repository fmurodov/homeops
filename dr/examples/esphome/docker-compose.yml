version: "3.8"

services:
  esphome:
    image: ghcr.io/esphome/esphome:2025.12.7
    container_name: esphome
    restart: unless-stopped
    # network_mode: host  # Uncomment on Linux for mDNS device discovery (doesn't work on macOS)
    environment:
      - TZ=${TZ:-UTC} # Uses system TZ or defaults to UTC
      - ESPHOME_DASHBOARD_USE_PING=true
      # Optional: Add credentials
      # - USERNAME=admin
      # - PASSWORD=yourpassword
    volumes:
      # Restored volume from Longhorn
      - ../../volumes/esphome-data:/config
      # Temporary build cache
      - esphome-cache:/cache
      - esphome-build-cache:/config/.esphome
    ports:
      - "6052:6052"

volumes:
  esphome-cache:
  esphome-build-cache:
